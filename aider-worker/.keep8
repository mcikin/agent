import asyncio
from contextlib import asynccontextmanager


@asynccontextmanager
async def semaphore_guard(sem: asyncio.Semaphore):
    await sem.acquire()
    try:
        yield
    finally:
        sem.release()







